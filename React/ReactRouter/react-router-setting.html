<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React Router 相关配置 | 余生的前端笔记本</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="description" content="记录平凡">
    <link rel="preload" href="/assets/css/0.styles.a4003502.css" as="style"><link rel="preload" href="/assets/js/app.63d82ad5.js" as="script"><link rel="preload" href="/assets/js/2.51fac5b8.js" as="script"><link rel="preload" href="/assets/js/93.cb5c0106.js" as="script"><link rel="prefetch" href="/assets/js/10.1faf398f.js"><link rel="prefetch" href="/assets/js/100.edc9a410.js"><link rel="prefetch" href="/assets/js/101.95060d0c.js"><link rel="prefetch" href="/assets/js/102.287ab207.js"><link rel="prefetch" href="/assets/js/103.0ab73193.js"><link rel="prefetch" href="/assets/js/104.db88b5e5.js"><link rel="prefetch" href="/assets/js/105.a0677b44.js"><link rel="prefetch" href="/assets/js/106.fa8c7b46.js"><link rel="prefetch" href="/assets/js/107.c5a11447.js"><link rel="prefetch" href="/assets/js/108.0cafee1b.js"><link rel="prefetch" href="/assets/js/109.3b193034.js"><link rel="prefetch" href="/assets/js/11.6bf048df.js"><link rel="prefetch" href="/assets/js/110.8be6fdbd.js"><link rel="prefetch" href="/assets/js/111.ce26d313.js"><link rel="prefetch" href="/assets/js/112.a948c50d.js"><link rel="prefetch" href="/assets/js/113.e3cbf3c9.js"><link rel="prefetch" href="/assets/js/114.c8704f74.js"><link rel="prefetch" href="/assets/js/115.642b1af3.js"><link rel="prefetch" href="/assets/js/116.ce61115b.js"><link rel="prefetch" href="/assets/js/117.53e24d0d.js"><link rel="prefetch" href="/assets/js/118.02a083bb.js"><link rel="prefetch" href="/assets/js/12.05dc0712.js"><link rel="prefetch" href="/assets/js/13.8469840d.js"><link rel="prefetch" href="/assets/js/14.476bf2b4.js"><link rel="prefetch" href="/assets/js/15.73262e19.js"><link rel="prefetch" href="/assets/js/16.a84e4240.js"><link rel="prefetch" href="/assets/js/17.3be54d85.js"><link rel="prefetch" href="/assets/js/18.500d10d8.js"><link rel="prefetch" href="/assets/js/19.8474792d.js"><link rel="prefetch" href="/assets/js/20.c4c313bc.js"><link rel="prefetch" href="/assets/js/21.b0881497.js"><link rel="prefetch" href="/assets/js/22.d5268e49.js"><link rel="prefetch" href="/assets/js/23.58ca6578.js"><link rel="prefetch" href="/assets/js/24.a3e7d50c.js"><link rel="prefetch" href="/assets/js/25.16abe053.js"><link rel="prefetch" href="/assets/js/26.86c0a1e4.js"><link rel="prefetch" href="/assets/js/27.7030e691.js"><link rel="prefetch" href="/assets/js/28.b95b5e7e.js"><link rel="prefetch" href="/assets/js/29.38af5e72.js"><link rel="prefetch" href="/assets/js/3.b7850748.js"><link rel="prefetch" href="/assets/js/30.2506a5c4.js"><link rel="prefetch" href="/assets/js/31.26cfc1d9.js"><link rel="prefetch" href="/assets/js/32.0a4b2fe0.js"><link rel="prefetch" href="/assets/js/33.36d9b152.js"><link rel="prefetch" href="/assets/js/34.2b9dc880.js"><link rel="prefetch" href="/assets/js/35.2567933d.js"><link rel="prefetch" href="/assets/js/36.23821499.js"><link rel="prefetch" href="/assets/js/37.46a4d915.js"><link rel="prefetch" href="/assets/js/38.78a550d5.js"><link rel="prefetch" href="/assets/js/39.d483d13f.js"><link rel="prefetch" href="/assets/js/4.7e99a2d3.js"><link rel="prefetch" href="/assets/js/40.11b1098a.js"><link rel="prefetch" href="/assets/js/41.a470035a.js"><link rel="prefetch" href="/assets/js/42.fc89c186.js"><link rel="prefetch" href="/assets/js/43.15247d93.js"><link rel="prefetch" href="/assets/js/44.ab9e5f68.js"><link rel="prefetch" href="/assets/js/45.d347fb15.js"><link rel="prefetch" href="/assets/js/46.3dbf0169.js"><link rel="prefetch" href="/assets/js/47.bc6372ae.js"><link rel="prefetch" href="/assets/js/48.dbe77d2f.js"><link rel="prefetch" href="/assets/js/49.dd9d0b24.js"><link rel="prefetch" href="/assets/js/5.aaad667d.js"><link rel="prefetch" href="/assets/js/50.b0e508e0.js"><link rel="prefetch" href="/assets/js/51.8aa9e878.js"><link rel="prefetch" href="/assets/js/52.0018c870.js"><link rel="prefetch" href="/assets/js/53.5a06eb48.js"><link rel="prefetch" href="/assets/js/54.9e9520ca.js"><link rel="prefetch" href="/assets/js/55.b31105a8.js"><link rel="prefetch" href="/assets/js/56.74611572.js"><link rel="prefetch" href="/assets/js/57.6b67fd76.js"><link rel="prefetch" href="/assets/js/58.8b1468a6.js"><link rel="prefetch" href="/assets/js/59.e8be7d8c.js"><link rel="prefetch" href="/assets/js/6.a4f112fa.js"><link rel="prefetch" href="/assets/js/60.ea5b3a65.js"><link rel="prefetch" href="/assets/js/61.6c1aa400.js"><link rel="prefetch" href="/assets/js/62.6a9fd3f2.js"><link rel="prefetch" href="/assets/js/63.ee99461a.js"><link rel="prefetch" href="/assets/js/64.4661ccd2.js"><link rel="prefetch" href="/assets/js/65.e0e20e21.js"><link rel="prefetch" href="/assets/js/66.8b6a2cc6.js"><link rel="prefetch" href="/assets/js/67.f5bd593e.js"><link rel="prefetch" href="/assets/js/68.b2dd851d.js"><link rel="prefetch" href="/assets/js/69.17a8b7c2.js"><link rel="prefetch" href="/assets/js/7.f165d4ad.js"><link rel="prefetch" href="/assets/js/70.3b0a4bae.js"><link rel="prefetch" href="/assets/js/71.8fb52176.js"><link rel="prefetch" href="/assets/js/72.ae7d47ce.js"><link rel="prefetch" href="/assets/js/73.f6da11ac.js"><link rel="prefetch" href="/assets/js/74.75e35b29.js"><link rel="prefetch" href="/assets/js/75.9787b833.js"><link rel="prefetch" href="/assets/js/76.a6795439.js"><link rel="prefetch" href="/assets/js/77.f2de5c43.js"><link rel="prefetch" href="/assets/js/78.84fd7717.js"><link rel="prefetch" href="/assets/js/79.1d895e61.js"><link rel="prefetch" href="/assets/js/8.93badb4c.js"><link rel="prefetch" href="/assets/js/80.4f1b455f.js"><link rel="prefetch" href="/assets/js/81.78f79ea3.js"><link rel="prefetch" href="/assets/js/82.aecd9bd1.js"><link rel="prefetch" href="/assets/js/83.2dca8591.js"><link rel="prefetch" href="/assets/js/84.c0535a15.js"><link rel="prefetch" href="/assets/js/85.d38bf145.js"><link rel="prefetch" href="/assets/js/86.67f10e3c.js"><link rel="prefetch" href="/assets/js/87.c1ae19be.js"><link rel="prefetch" href="/assets/js/88.97d3b017.js"><link rel="prefetch" href="/assets/js/89.de85dd27.js"><link rel="prefetch" href="/assets/js/9.b253a2ce.js"><link rel="prefetch" href="/assets/js/90.034001bb.js"><link rel="prefetch" href="/assets/js/91.94575fb1.js"><link rel="prefetch" href="/assets/js/92.aedf6b5c.js"><link rel="prefetch" href="/assets/js/94.330f76b4.js"><link rel="prefetch" href="/assets/js/95.1396fb1e.js"><link rel="prefetch" href="/assets/js/96.c6743534.js"><link rel="prefetch" href="/assets/js/97.dc846e20.js"><link rel="prefetch" href="/assets/js/98.8b7823df.js"><link rel="prefetch" href="/assets/js/99.ad33d094.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a4003502.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">余生的前端笔记本</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Computer/" class="nav-link">
  计算机
</a></div><div class="nav-item"><a href="/Frontend/" class="nav-link">
  大前端
</a></div><div class="nav-item"><a href="/Notes/" class="nav-link">
  Notes
</a></div><div class="nav-item"><a href="/Interview/" class="nav-link">
  Interview
</a></div><div class="nav-item"><a href="/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/CSS/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/Vue/VueBasic/VueRespond.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/React/" class="nav-link router-link-active">
  React
</a></div><div class="nav-item"><a href="/CodeTools/VSCode/VSCodeVue.html" class="nav-link">
  CodeTools
</a></div><div class="nav-item"><a href="/DZH/Explain.html" class="nav-link">
  大杂烩
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Computer/" class="nav-link">
  计算机
</a></div><div class="nav-item"><a href="/Frontend/" class="nav-link">
  大前端
</a></div><div class="nav-item"><a href="/Notes/" class="nav-link">
  Notes
</a></div><div class="nav-item"><a href="/Interview/" class="nav-link">
  Interview
</a></div><div class="nav-item"><a href="/JS/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/CSS/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/Vue/VueBasic/VueRespond.html" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/React/" class="nav-link router-link-active">
  React
</a></div><div class="nav-item"><a href="/CodeTools/VSCode/VSCodeVue.html" class="nav-link">
  CodeTools
</a></div><div class="nav-item"><a href="/DZH/Explain.html" class="nav-link">
  大杂烩
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React Router</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/React/ReactRouter/react-router.html" class="sidebar-link">React Router 简介</a></li><li><a href="/React/ReactRouter/react-router-setting.html" class="active sidebar-link">React Router 相关配置</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-router-相关配置"><a href="#react-router-相关配置" class="header-anchor">#</a> React Router 相关配置</h1> <h3 id="browserrouter"><a href="#browserrouter" class="header-anchor">#</a> <code>&lt;BrowserRouter&gt;</code></h3> <p><code>&lt;BrowserRouter&gt;</code>是基于 HTML5 history API 和 popstate 事件所封装的一个高阶组件，在不考虑过低版本（如 IE9 及以下，安卓4.1及以下等）兼容的情况下，可以说是本文优先推荐的组件。其基本属性如下：</p> <h4 id="basename-string"><a href="#basename-string" class="header-anchor">#</a> basename: String</h4> <p>配置整个 webapp 的基准 URL，比如你的资源放在了服务器 /web 下面，那么可以统一配置 basename='/web'，此时访问home页面，实际 URL 为 '/web/home'</p> <h4 id="getuserconfirmation-func"><a href="#getuserconfirmation-func" class="header-anchor">#</a> getUserConfirmation: func</h4> <p>导航前所要用的函数，默认是 window.confirm，目前很少用到此功能。</p> <h4 id="forcerefresh-bool"><a href="#forcerefresh-bool" class="header-anchor">#</a> forceRefresh: bool</h4> <p>这个属性为true的时候，页面跳转时会强制刷新。一般在不支持HTML5 history API的时候可能会用到这个属性。</p> <h4 id="keylength-number"><a href="#keylength-number" class="header-anchor">#</a> keyLength: number</h4> <p>location.key的长度，默认是6。location.key是随着页面不断变化的，详情可以见下文对location对象的介绍。</p> <h4 id="children-node"><a href="#children-node" class="header-anchor">#</a> children: node</h4> <p>渲染子元素。这个实际就是 react 组件的一个特性了，而不是 BrowserRouter 这个组件独有的特性。</p> <p>下面是关于 <code>&lt;BrowserRouter&gt;</code> 组件的示例代码，可以复制到前文 <a href="https://www.yuque.com/fe9/basic/kng36q" target="_blank" rel="noopener noreferrer">React Router 简介<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中的代码事例中尝试一下，也可以参考完整版 <a href="https://github.com/objlong/react-router-demo/tree/master/demo2" target="_blank" rel="noopener noreferrer">demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://github.com/objlong/react-router-demo/tree/master/demo2" target="_blank" rel="noopener noreferrer">2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导航前的函数constgetConfirmation= (message, callback) =&gt; {</span>
constallowTransition <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
  <span class="token function">callback</span><span class="token punctuation">(</span>allowTransition<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 判断是否支持 HTML5 history API</span>
<span class="token keyword">const</span> supportsHistory <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'pushState'</span> <span class="token keyword">in</span> window<span class="token punctuation">.</span>history<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>BrowserRouter
            basename<span class="token operator">=</span><span class="token string">'/web'</span>
            getUserConfirmation<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getConfirmation</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            forceRefresh<span class="token operator">=</span><span class="token punctuation">{</span>supportsHistory<span class="token punctuation">}</span> <span class="token comment">// false: 不刷新 true: 刷新</span>
            keyLength<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">}</span> <span class="token comment">// location.key长度为12</span>
        <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span> 
            <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Nav<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/'</span> exact <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// 实际路径 /web</span>
            <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/home'</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// 实际路径 /web/home</span>
            <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Content<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/content'</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// 实际路径 /web/page</span>
            <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Log<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/log'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>  <span class="token comment">// 实际路径 /web/log</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="hashrouter"><a href="#hashrouter" class="header-anchor">#</a> <code>&lt;HashRouter&gt;</code></h3> <p><code>&lt;HashRouter&gt;</code>是基于 window.location.hash 和 hashchange 事件所封装的路由组件。其特点是兼容性较好。但是不支持 location.key 和location.state，也不支持 forceRefresh，keyLength。其 <strong>basename</strong>、<strong>getUserConfirmation</strong> 和 <strong>children</strong> 的使用方法与 <code>&lt;BrowserRouter&gt;</code> 一致，接下来描述其独有属性：</p> <h4 id="hashtype-string"><a href="#hashtype-string" class="header-anchor">#</a> hashType: string</h4> <p>用于window.location.hash 的编码类型。</p> <ul><li><p>&quot;slash&quot; - 创建的url为 #/ 或者 #/web/home</p></li> <li><p>&quot;noslash&quot; - 创建的url为 # 或者 #web/home</p></li> <li><p>&quot;hashbang&quot; - 创建的url为 #!/ 或者 #!/web/home</p></li></ul> <p><code>&lt;HashRouter&gt;</code> 与 <code>&lt;BrowserRouter&gt;</code>用法类似，故不再做 demo。</p> <h4 id="link"><a href="#link" class="header-anchor">#</a> <code>&lt;Link&gt;</code></h4> <p><code>&lt;Link&gt;</code> 是一种声明式的导航组件。用法比较简单。</p> <h4 id="to-string"><a href="#to-string" class="header-anchor">#</a> to: string</h4> <p>参数为字符串时，直接跳转到指定路径。</p> <h4 id="to-object"><a href="#to-object" class="header-anchor">#</a> to:object</h4> <p>参数为对象时，可以传递以下字段：</p> <ul><li><p>pathname: 页面路径</p></li> <li><p>search: 页面 url 参数（window.location.search）</p></li> <li><p>hash: 页面 hash（window.location.hash）</p></li> <li><p>state: 隐性传递的一些参数</p></li></ul> <p>传递的字段可以在相应页面组件的props.location中取得。如 <a href="https://github.com/objlong/react-router-demo/tree/master/demo3" target="_blank" rel="noopener noreferrer">demo3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中 /src/containers/Nav/Nav.js进入内容页的导航：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// demo3中 /src/containers/Nav/Nav.js 进入内容页的导航&lt;Link to={</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/content'</span><span class="token punctuation">,</span>
    search<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    hash<span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
    state<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'测试员1'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>而对应的 /src/containers/Content/Content.js 内容页对其渲染：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Nav <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'content'</span><span class="token operator">&gt;</span>我是<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span>，我的search为：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">}</span>，我的hash为：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>最终渲染结果为：<strong>我是测试员1，我的search为：?hello，我的hash为：#world</strong></p> <h4 id="replace-bool"><a href="#replace-bool" class="header-anchor">#</a> replace: bool</h4> <p>如果跳转的下一个页面 replace 为 true，当页面回退的时候，会回退到上一个页面，而不是当前页。比如你从 '/' 跳转至 '/content' 页面，又从 '/content' 页面跳转至 '/log'， 导航至 '/log' 页面的Link为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/log'</span> replace <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时点击浏览器回退，会直接回退至'/'页面。</p> <h4 id="innerref-function"><a href="#innerref-function" class="header-anchor">#</a> innerRef: function</h4> <p>此属性可以获取真实的 DOM 节点。如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">constrefCallback</span><span class="token operator">=</span> <span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// node在未渲染的时候是null，在渲染的时候是真实dom</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/other'</span> innerRef<span class="token operator">=</span><span class="token punctuation">{</span>refCallback<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>&lt;Link&gt;</code> 组件的具体示例，可以查看 <a href="https://github.com/objlong/react-router-demo/tree/master/demo3" target="_blank" rel="noopener noreferrer">demo3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="route"><a href="#route" class="header-anchor">#</a> <code>&lt;Route&gt;</code></h3> <p><code>&lt;Route&gt;</code> 组件可以说是一个非常重要的组件了，它的主要功能是当访问的地址与 Route 上的路径匹配时，渲染出对应的 UI 页面。因此，你应该熟练地去学习并理解它。</p> <p>例如以下示例代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/content&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Content<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当你访问 URL: / 的时候，就显示home页面，类似于：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>而当你访问 URL: /content的时候，则渲染出 content 页面，类似于：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Content <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="三种渲染方法"><a href="#三种渲染方法" class="header-anchor">#</a> 三种渲染方法</h4> <p><code>&lt;Route&gt;</code> 组件提供了三种渲染方法供你使用，分别是：</p> <ul><li><p><code>&lt;Route component&gt;</code> 通过传入组件渲染，渲染时会调用 React.createElement 来生成 React 元素，适用于<strong>大部分</strong>场景。</p></li> <li><p><code>&lt;Route render&gt;</code> 通过传入对应的 render 函数渲染，render 函数需要返回一个 React 元素。</p></li> <li><p><code>&lt;Route children&gt;</code> 与 render 类似，也是传入需要返回一个 React 元素的函数，区别是不管路径是否匹配，传入的 children 都会渲染。</p></li></ul> <p><em>注意：三种方法不要在同一个 <code>&lt;Route&gt;</code> 组件内使用。</em></p> <p>三种渲染方法都会传入以下三个参数：</p> <ul><li><p>match</p></li> <li><p>location</p></li> <li><p>history</p></li></ul> <h4 id="component"><a href="#component" class="header-anchor">#</a> component</h4> <p>访问地址与路由匹配时，一个组件才会被渲染，此时这个组件接受 route props(match, location, history)。</p> <p>当使用 component 时，router 将通过 React.createElement 去根据给定的 component 创建一个新的 react 元素。这意味你如果给 component 一个内联函数（inline function），那么每次渲染的时候都会生成一个新的组件，这会导致已经生成的组件不会挂载（unmounting），而是又重新挂载（mounting）了一个新组件。而我们想要的结果，却是去更新那个已经存在的组件。因此当你想要使用内联函数进行行内渲染（inline render）的时候，推荐使用 render 或者 children。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">constLog</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>match<span class="token punctuation">,</span> location<span class="token punctuation">,</span> history<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是日志<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Log<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/log'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="render-func"><a href="#render-func" class="header-anchor">#</a> render: func</h4> <p>render允许内联渲染和二次封装，而不会出现上文中的重复挂载问题。其间传递的参数是一样的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 内联渲染</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span>render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// 二次封装一个fadeIn路由</span>
<span class="token keyword">const</span> <span class="token function-variable function">FadingRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> component<span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Route <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>FadeIn<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>FadeIn<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token operator">&lt;</span>FadingRoute path<span class="token operator">=</span><span class="token string">&quot;/cool&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Something<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="children-func"><a href="#children-func" class="header-anchor">#</a> children: func</h4> <p>有时候你只是想改变下其他东西，比如一个导航改变下选中态，而不是重新渲染页面，此时可以选择用 children。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ListItemLink to<span class="token operator">=</span><span class="token string">&quot;/somewhere&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ListItemLink to<span class="token operator">=</span><span class="token string">&quot;/somewhere-else&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// 改变样式</span>
<span class="token keyword">const</span> <span class="token function-variable function">ListItemLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> to<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Route
    path<span class="token operator">=</span><span class="token punctuation">{</span>to<span class="token punctuation">}</span>
    children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>li className<span class="token operator">=</span><span class="token punctuation">{</span>match <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>to<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Animate动画组件总是被重新渲染，保证动画的执行。</span>
<span class="token operator">&lt;</span>Route children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Animate<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>match <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Something <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Animate<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>关于component，render，children 的示例代码可以看 <a href="https://github.com/objlong/react-router-demo/tree/master/demo3" target="_blank" rel="noopener noreferrer">demo3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 下的 <a href="https://github.com/objlong/react-router-demo/blob/master/demo3/src/App.js" target="_blank" rel="noopener noreferrer">/src/App.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h4 id="path-string-string"><a href="#path-string-string" class="header-anchor">#</a> path: string | string[]</h4> <p>任何可以被 <a href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer">path-to-regexp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 解析的 URL。</p> <p>注：如果没写 path 参数且不在 <code>&lt;switch&gt;</code> 里面将会被全部匹配。</p> <h4 id="exact-bool"><a href="#exact-bool" class="header-anchor">#</a> exact: bool</h4> <p>当 exact 为 true 的时候，路由需要准确地匹配，如“/one”无法匹配“/one/two”。反之亦然。</p> <h4 id="strict-bool"><a href="#strict-bool" class="header-anchor">#</a> strict: bool</h4> <p>当 strict 为 true 的时候，路由后面的斜杠将被严格匹配，如“/one/”无法匹配“/one”，但是可以匹配“/one/”或者“/one/two”。反之亦然。</p> <h4 id="sensitive-bool"><a href="#sensitive-bool" class="header-anchor">#</a> sensitive: bool</h4> <p>当 sensitive 为 true 的时候，会对大小写敏感，如“/One”无法匹配“/one”。反之亦然。</p> <p>因此，当你想要严格匹配你的路由的时候，需要把 exact 和 strict 还有 sensitive 都设置为 true。</p> <h4 id="switch"><a href="#switch" class="header-anchor">#</a> <code>&lt;Switch&gt;</code></h4> <p>用 <code>&lt;Switch&gt;</code> 组件包裹 <code>&lt;Route&gt;</code> 和 <code>&lt;Redirect&gt;</code> 组件，将会它们中渲染第一个匹配的。</p> <p>例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token comment">// 导航放在外面，所有页面都会渲染}</span>
<span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Nav<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span> 
  <span class="token punctuation">{</span><span class="token comment">// 放在里面的只会渲染一个}</span>
  <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/'</span> exact <span class="token operator">/</span><span class="token operator">&gt;</span> 
  <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Content<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/content'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Log<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/log'</span> <span class="token operator">/</span><span class="token operator">&gt;</span> 
  <span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Other<span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/other'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我是render<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">'/:render'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>当你访问 “/content” 的时候，若没有 <code>&lt;Switch&gt;</code> 则“/:render”页面也会被渲染，而加上它，则不会被渲染了。至于为什么要有此类设计，因为很多元素像是导航之类的，是所有页面共有的，则可以放在 <code>&lt;Switch&gt;</code> 外面匹配所有。关于它的示例代码在 <a href="https://github.com/objlong/react-router-demo/tree/master/demo3" target="_blank" rel="noopener noreferrer">demo3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h4 id="navlink"><a href="#navlink" class="header-anchor">#</a> <code>&lt;NavLink&gt;</code></h4> <p><code>&lt;Link&gt;</code> 组件的特殊版本，说白了就是导航。</p> <h4 id="activeclassname-string"><a href="#activeclassname-string" class="header-anchor">#</a> activeClassName: string</h4> <p>激活态下的 class 名，默认是 activite。</p> <h4 id="activestyle-object"><a href="#activestyle-object" class="header-anchor">#</a> activeStyle: object</h4> <p>激活状态下的样式。</p> <h4 id="exact-bool-2"><a href="#exact-bool-2" class="header-anchor">#</a> exact: bool</h4> <p>若为true，则严格匹配路由，类似 <code>&lt;Route&gt;</code> 的exact属性。</p> <h4 id="strict-bool-2"><a href="#strict-bool-2" class="header-anchor">#</a> strict: bool</h4> <p>若为true，则严格匹配“/”，类似 <code>&lt;Route&gt;</code> 的strict属性</p> <h4 id="isactive-func"><a href="#isactive-func" class="header-anchor">#</a> isActive: func</h4> <p>此属性可以添加额外的逻辑来确定路由是否激活，如果除了验证链接与当前 URL 匹配之外，还想执行更多操作，则可以使用这个属性。</p> <h4 id="redirect"><a href="#redirect" class="header-anchor">#</a> <code>&lt;Redirect&gt;</code></h4> <p>使用 <code>&lt;Redirect&gt;</code> 组件，将会重定向到一个新的地址，并且新地址覆盖现有地址在访问历史里的记录，就是说无法回退至现有地址。例如我们可以用这个组件来做登录跳转：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token comment">// isLogn 为 false 的时候，直接触发跳转登录页}</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">'/'</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  isLogin 
  <span class="token operator">?</span> 
  <span class="token punctuation">(</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token operator">:</span>
  <span class="token punctuation">(</span><span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">'/login'</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span> exact <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="to-string-object"><a href="#to-string-object" class="header-anchor">#</a> to: string | object</h4> <p>重定向的地址，可以被 <a href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer">path-to-regexp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 解析。</p> <h4 id="push-bool"><a href="#push-bool" class="header-anchor">#</a> push: bool</h4> <p>若为 true，将会把地址推入历史记录中，而不是替换现有地址。</p> <h4 id="from-string"><a href="#from-string" class="header-anchor">#</a> from: string</h4> <p>需要匹配的现有地址。官方建议放在 <code>&lt;Switch&gt;</code> 里面使用，保证匹配的唯一性。</p> <h4 id="exact-bool，strict-bool"><a href="#exact-bool，strict-bool" class="header-anchor">#</a> exact: bool，strict: bool</h4> <p>与 <code>&lt;Route&gt;</code> 的相关属性类似。</p> <h3 id="prompt"><a href="#prompt" class="header-anchor">#</a> <code>&lt;Prompt&gt;</code></h3> <p><code>&lt;Prompt&gt;</code>组件用于在离开页面时，做一些提示。</p> <h4 id="message-string-func"><a href="#message-string-func" class="header-anchor">#</a> message: string | func</h4> <p>离开页面时需要提示的一些信息。</p> <h4 id="when-bool"><a href="#when-bool" class="header-anchor">#</a> when: bool</h4> <p>离开页面时是否要提示。</p> <h3 id="react-router-三大参数对象"><a href="#react-router-三大参数对象" class="header-anchor">#</a> React Router 三大参数对象</h3> <p>从上文可以看到，在很多地方都提及了 React Router 的三个参数对象：history，location，match，这三个对象可以在运行 demo 的时候打印下来看一下，下面将详细介绍这三个对象的作用和用法。</p> <h3 id="history"><a href="#history" class="header-anchor">#</a> history</h3> <p><a href="https://github.com/ReactTraining/history" target="_blank" rel="noopener noreferrer">history<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 React Router 的两大重要依赖（另一个是 React）之一，它在不同的 js 环境中都实现了对会话历史的管理。</p> <p>如今有以下几种方式会被用到：</p> <ul><li><p>&quot;browser history&quot; ——用于支持 history HTML5 API 的浏览器，需要有 DOM 支持。</p></li> <li><p>&quot;hash history&quot;——用于旧版的浏览器，也需要有DOM支持。</p></li> <li><p>&quot;memory history&quot;——内存中历史记录的实现，通常用于无DOM环境，比如测试环境，或者 React Native 等。</p></li></ul> <p>history 对象通常有以下几种属性和方法：</p> <ul><li><p>length - (number) 浏览历史堆栈中的数量</p></li> <li><p>action - (string) 跳转到当前页面执行的动作（PUSH，REPLACE 或者 POP）</p></li> <li><p>location - (object) 当前页面的 location 对象</p></li> <li><p>location.pathname - (string) URL路径</p></li> <li><p>location.search - (string) URL的字符参数</p></li> <li><p>location.hash - (string) URL中的hash</p></li> <li><p>location.state - (object) 例如在执行 push(path, state) 操作时，state会被记录到历史记录堆栈中。只适用于browser history 和 memory history</p></li> <li><p>push(path, [ state ]) - (function) 在历史堆栈中加入新的条目</p></li> <li><p>replace(path, [ state ]) - (function) 替换历史堆栈中当前的条目</p></li> <li><p>go(n) - (function) 历史堆栈中的指针向前移动n，页面发生前进操作</p></li> <li><p>goBack() - (function) 相当于go(-1)，返回上一页</p></li> <li><p>goForward() - (function) 相当于go(1)，前进一页</p></li> <li><p>block(prompt) - (function) 阻止跳转</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  action<span class="token operator">:</span> <span class="token string">&quot;PUSH&quot;</span><span class="token punctuation">,</span>
  block<span class="token operator">:</span> ƒ <span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  createHref<span class="token operator">:</span> ƒ <span class="token function">createHref</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">,</span>
  go<span class="token operator">:</span> ƒ <span class="token function">go</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span>
  goBack<span class="token operator">:</span> ƒ <span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  goForward<span class="token operator">:</span> ƒ <span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  listen<span class="token operator">:</span> ƒ <span class="token function">listen</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">,</span>
  location<span class="token operator">:</span>
  <span class="token punctuation">{</span>
    hash<span class="token operator">:</span> <span class="token string">&quot;#world&quot;</span><span class="token punctuation">,</span>
    key<span class="token operator">:</span> <span class="token string">&quot;7ickpi3i926&quot;</span><span class="token punctuation">,</span>
    pathname<span class="token operator">:</span> <span class="token string">&quot;/content&quot;</span><span class="token punctuation">,</span>
    search<span class="token operator">:</span> <span class="token string">&quot;?hello&quot;</span><span class="token punctuation">,</span>
    state<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;测试员1&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  push<span class="token operator">:</span> ƒ <span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">,</span>
  replace<span class="token operator">:</span> ƒ <span class="token function">replace</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>history 是易变的</strong></p> <p>history 是易变的，因此当你需要 location 对象时，要去直接取 location 参数，比如 <code>&lt;Route&gt;</code> 中，而不去拿 history.location 来用。引用官方示例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>classCompextendsReact<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 结果为 true</span>
    <span class="token keyword">const</span> locationChanged <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>location<span class="token punctuation">;</span>

    <span class="token comment">// 通常结果都为 false 就因为 history 的可变性</span>
    <span class="token keyword">const</span> locationChanged <span class="token operator">=</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span>location <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>history<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>Route component<span class="token operator">=</span><span class="token punctuation">{</span>Comp<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="location"><a href="#location" class="header-anchor">#</a> location</h3> <p>location 为你展示了当前页面从哪儿来，到哪里去，以及现在是什么状态。它主要有以下几个属性：</p> <ul><li><p>key - (string) 随机字符串，作为 location 的id，HashHistory 没有这个属性</p></li> <li><p>pathname - (string) 当前页面 URL</p></li> <li><p>search - (string) 当前 URL 的字符串参数</p></li> <li><p>hash - (string) 当前 URL 的 hash</p></li> <li><p>state - (object) 你要传递的 state 参数</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token string">'ac3df4'</span><span class="token punctuation">,</span> <span class="token comment">// HashHistory 没有！</span>
  pathname<span class="token operator">:</span> <span class="token string">'/somewhere'</span>
  search<span class="token operator">:</span> <span class="token string">'?some=search-string'</span><span class="token punctuation">,</span>
  hash<span class="token operator">:</span> <span class="token string">'#howdy'</span><span class="token punctuation">,</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>userDefined<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>location 通常会在下面场景中出现：</p> <ul><li><p>Route component - this.props.location</p></li> <li><p>Route render - ({ location }) =&gt; ()</p></li> <li><p>Route children - ({ location }) =&gt; ()</p></li> <li><p>withRouter - this.props.location</p></li></ul> <p>history.location 也算是 location 的一种应用场景但是不要用它，因为 history 是可变的。</p> <p>location 对象是在生命周期内，是不变的。因此你可以通过 location 来确定页面 URL 的改变，在动画以及拉取数据时常会用到。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>location <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 组件更新过程中 location 改变了，证明页面URL发生了变化</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>location 通常可以在以下情景中使用：</p> <ul><li><p>web 端的 Link 类组件</p></li> <li><p>React Native 端的 Link 类组件</p></li> <li><p><code>&lt;Redirect to={location} /&gt;</code></p></li> <li><p>history.push(location)</p></li> <li><p>history.replace(location)</p></li></ul> <p>location 可以让你不再只是根据 URL 的字符串来做一些逻辑，可以通过它的 state 等属性，来更轻松地完成你的逻辑。</p> <h3 id="match"><a href="#match" class="header-anchor">#</a> match</h3> <p>match对象里面存储了 <code>&lt;Route path&gt;</code> 与 URL 匹配的信息，主要包含：</p> <ul><li><p>params - (object)  URL 动态匹配的参数，如 URL 为 &quot;/user/:name&quot;，你访问 &quot;/user/chenxin&quot;，params为：{ name: 'chenxin' }</p></li> <li><p>isExact - (boolean) URL是否是严格匹配</p></li> <li><p>path - (string) 用来创建嵌套的 <code>&lt;Route&gt;</code> 的匹配字段</p></li> <li><p>url - (string) 用来创建嵌套的 <code>&lt;Link&gt;</code> 的匹配字段</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  isExact<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;chenxin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> <span class="token string">&quot;/user/:name&quot;</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">&quot;/user/chenxin&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>match通常在以下场景中使用：</p> <ul><li><p>Route component 中 this.props.match</p></li> <li> =&gt; () }/&gt;
</li> <li> =&gt; () }/&gt;
</li> <li><p>widthRouter 中 this.props.match</p></li> <li><p>matchPath 的返回值</p></li></ul> <p>如上，是关于 React Router 在 web 端开发中，一些常见配置项的介绍。</p> <p><em>参考文献：</em><a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener noreferrer">React Router 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/React/ReactRouter/react-router.html" class="prev">
        React Router 简介
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.63d82ad5.js" defer></script><script src="/assets/js/2.51fac5b8.js" defer></script><script src="/assets/js/93.cb5c0106.js" defer></script>
  </body>
</html>
